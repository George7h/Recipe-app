<div>
  <h1>My Recipes</h1>

  <p>If the user is signed in, they can see this button:</p>
  <% if can? :create, Recipe %>
    <%= link_to 'Add Recipe' , new_recipe_path %>
  <% end %>

  <p>If the user is NOT signed in, they can't see any buttons</p>

  <ul>
    <% @recipes.each_with_index do |recipe, i| %>
      <li>
        <%= link_to "/recipes/#{recipe.id}" do %>
          <div>
            <h2><%= recipe.name %></h2>
          </div>
        <% end %>

        <% if can? :destroy, recipe %>
          <%= form_with model: recipe, url: recipe_path(recipe), method: :delete do |f| %>
            <div>
              <%= f.submit "REMOVE" %>
            </div>
          <% end %>
        <% end %>

        <div>
          <p><%= truncate(recipe.description, length: 100, omission: '...') %></p>
        </div>
      </li>
    <% end %>
  </ul>
</div>
